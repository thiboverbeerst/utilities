(self.webpackChunklite=self.webpackChunklite||[]).push([[6804],{56804:(e,t,n)=>{"use strict";n.d(t,{S:()=>Z});var i=n(59713),a=n.n(i),o=n(64718),l=n(67294),r=n(27517),s=n(54933),u=n(1249),d=n(29074),c=n(24291),p=n(78457),m=n(11098),v=n(20998),f=n(95983),b=n(75857),k=n(6443),g=n(39507),h=n(18733),C=n(26350),S=n(18627),y=n(66411),w=n(83486),O=n(43487),E=n(51681),N=n(59764),F=n(50458),P=n(13195),I=n(10654),j=n(47628),D=n(6479),V=n.n(D),x=n(75412),L=n(6342),T=n(93818),H=n(72431),A=n(32317),_=n(319),R=n.n(_),B=n(78693),M=n(21177),U={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostVotersDialogQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"voters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserInListDialog_user"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_post"}}]}}]}}].concat(R()(B.s.definitions),R()(M.n.definitions),R()(B.S.definitions))};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){var t=e.post,n=e.hide,i=e.isVisible,a=e.fetchMore,o=e.loading;if(!t)return null;var r=t.title,s=t.voters,u=t.clapCount,d=t.voterCount;return l.createElement(T.x,{isVisible:i,fetchMore:a,loading:o,hide:n,title:r,clapCount:null!=u?u:0,voterCount:null!=d?d:0,voters:s?s.items.map((function(e){var n=e.user,i=e.clapCount;return n&&l.createElement(L.F,{user:n,key:n.id,followButton:l.createElement(A.B,{buttonSize:"SMALL",post:t,user:n,susiEntry:"follow_list"}),badge:l.createElement(H.g,{clapCount:i})})})):null})};function Q(e){var t=e.postId,n=e.isVisible,i=e.hide;return n?l.createElement(x.A,{ssr:!1,query:U,variables:{postId:t,pagingOptions:{limit:10}},notifyOnNetworkStatusChange:!0},(function(e){var t,a=e.data,o=(a=void 0===a?{}:a).post,r=e.loading,s=e.error,u=e.fetchMore;if(s||null==o||!o.voters)return null;var d=o.voters.pagingInfo&&o.voters.pagingInfo.next;if(d){d.__typename;var c=V()(d,["__typename"]);t=function(){return u({variables:{pagingOptions:$($({},c),{},{limit:10})}})}}return l.createElement(z,{hide:i,fetchMore:t,post:o,isVisible:n,loading:r})})):null}var W=n(30020),Y=n(66227);function J(e){var t=e.clapCount,n=e.hasLabel,i=void 0!==n&&n,a=e.showFullNumber,o=void 0!==a&&a,r=e.post,s=e.hasDialog,u=void 0!==s&&s,d=e.shouldShowResponsiveLabelText,c=void 0!==d&&d,p=e.shouldHideClapsText,m=void 0!==p&&p,v=e.countColor,f=e.countScale,b=e.isLoading,k=void 0!==b&&b,g=r.id;if(!(t>0||k))return null;var h=function(e){var n=e.showVoters;return l.createElement(j.$,{showVoters:n,hasLabel:i,showFullNumber:o,shouldShowResponsiveLabelText:c,shouldHideClapsText:m,clapCount:t,countColor:v,countScale:f,isLoading:k})};return u&&g&&!k?l.createElement(Y.B,null,(function(e){var t=e.isVisible,n=e.show,i=e.hide;return l.createElement(l.Fragment,null,l.createElement(W._,{tooltipText:"View Claps",targetDistance:15},l.createElement(h,{showVoters:n})),t&&l.createElement(Q,{isVisible:!0,hide:i,postId:g}))})):l.createElement(h,null)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t,n=e.post,i=e.buttonStyle,a=e.hasDialog,j=e.shouldShowResponsiveLabelText,D=void 0!==j&&j,V=e.shouldHideClapsText,x=void 0!==V&&V,L=e.shouldHideClapsCount,T=void 0!==L&&L,H=e.susiEntry,A=e.verticalClapsText,_=void 0!==A&&A,R=e.buttonColor,B=e.countScale,M=e.testId,U=(0,o.a)(I.A,{fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1,variables:{postId:n.id}}),q=U.data,$=U.loading,z=q&&(0,N.f)(q.postResult)?q.postResult.clapCount:null,Q=G(G({},n),{},{clapCount:z}),W=(0,P.C)(),Y=(0,k.H)(),K=Y.value,X=Y.loading,Z=null!==(t=null==K?void 0:K.id)&&void 0!==t?t:"",ee=(0,g.T)(n).viewerEdge,te=(0,O.v9)((function(e){return e.config.authDomain})),ne=(0,O.b$)((function(e){return e.multiVote.clapsPerPost})),ie=(0,r.I0)(),ae=(0,S.Av)(),oe=(0,y.pK)(),le=(0,E.l)(ne,Q,ee),re=le.clapCount,se=le.viewerClapCount,ue=le.viewerHasClappedSinceFetch,de=(0,l.useCallback)((function(){if(se&&se>=f.S2)return"Viewer exceeded authorized claps limit.";var e;e={postId:n.id,clapCount:re+1,viewerClapCount:se+1,viewerHasClappedSinceFetch:!0},ie((0,w.at)(e))}),[se,n.id,re]),ce=(0,l.useCallback)((function(e){W(Q,Z,e,ee),ae.event("post.clientUpvote",{postId:n.id,postIds:[n.id],voteCount:e,source:oe})}),[n.id,Z,ee,oe]),pe=(0,b.m)({onIncrementClaps:de,onSubmitClapsAccumulated:ce}),me=pe.clappedAt,ve=pe.onFloatEnd,fe=pe.removeBurst,be=pe.clap,ke=pe.isPopping,ge=pe.isShowingViewerClapCount,he=pe.burstOffsets,Ce=pe.onPopEnd;(0,l.useEffect)((function(){return function(){var e;e={postId:n.id},ie((0,w.HQ)(e))}}),[]);var Se,ye=n.collection,we=n.creator,Oe=n.id,Ee=n.isPublished,Ne=n.isLimitedState,Fe=(Se=!(!we||we.id!==Z),Ne?"This feature is temporarily disabled":Ee?Se?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),Pe=(0,f.wH)(i,D),Ie=Pe.alwaysShowClapsLabel,je=Pe.hasClapsLabel,De=Pe.buttonScale,Ve=!!(se&&se>0),xe=!!(re&&re>0),Le=ye&&ye.slug?(0,F.JL)(te,ye.slug,Oe):(0,F.kI)(te,Oe);return l.createElement(d.l,{verticalClapsText:_},l.createElement(p.$,{buttonStyle:i,hasClaps:xe||$},Z||Fe||X?l.createElement(l.Fragment,null,ge&&l.createElement(h.N8,null,l.createElement(c.q,{count:se,clappedAt:me,onFloatEnd:ve})),l.createElement(v.v,{isPopping:ke,onPopEnd:Ce},l.createElement(u.d,{buttonColor:R,disableReason:Fe,isFilled:Ve,isLoading:X||$,onClickAndHold:be,scale:De,shouldHideClapsText:x,testId:M})),he.map((function(e){return l.createElement(s.P,{key:e,offset:e,onBurstEnd:fe})}))):l.createElement(C.R,{operation:"register",post:n,user:n.creator,actionUrl:Le,susiEntry:H,testId:M},l.createElement(u.d,{scale:De,buttonColor:R,testId:M}))),(xe||$)&&!T&&(!ge||Ie)&&l.createElement(m.W,{buttonStyle:i},l.createElement(J,{post:n,clapCount:re,showFullNumber:ue,hasLabel:je,hasDialog:a,shouldShowResponsiveLabelText:D,shouldHideClapsText:x,countColor:R,countScale:B,isLoading:$})))},Z=function(e){var t;return l.createElement(y.cW,{source:{postId:null===(t=e.post)||void 0===t?void 0:t.id},extendSource:!0},l.createElement(X,e))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6804.971ca132.chunk.js.map